


import{_ as v,s as E,r as a,o as s,b as u,w as c,e as o,z as h,y,f as n,E as g,a as k,t as B,T as V}from"./index-16cfe48a.js";import{u as _}from"./useEtherJsStore-cbfd4020.js";import{u as b}from"./useValidateModule-e4f95304.js";import"./useBtcStore-3235f34f.js";import"./useErc20TokenStore-82c493ef.js";const C=E({name:"SendEtherForm",data(){return{isLoading:!1,transaction:"",form:{receiver:"",amount:""},errors:this.validateModule.errorHandlerModule.value}},setup(){const e=_(),t=b();async function i(d){return await e.onSendEth(d)}async function l(){return await e.getUserData()}return{useEtherJs:e,validateModule:t,onSendEth:i,getUserData:l}},methods:{async submitForm(){try{const e={receiver:this.form.receiver,amount:this.form.amount};if(!this.validate(e.receiver,e.amount))return;this.isLoading=!0,this.transaction=await this.onSendEth(e).then(t=>(alert(t.hash),t.hash)),await this.getUserData(),this.form={receiver:"",amount:""}}catch(e){console.log("SubmitForm error: ",e)}finally{this.isLoading=!1}},validate(e,t){return this.validateModule.validateForm([{key:"address",value:e,method:"isNotEmpty"},{key:"amount",value:t,method:"isNotEmpty"},{key:"address",value:e,method:"isEthAddressValid"},{key:"amount",value:t,method:"isValueOverZero"},{key:"amount",value:t,method:"isAmountNoOverEtherBalance"}])}},computed:{getEtherscanLink(){return this.transaction?`https://sepolia.etherscan.io/tx/${this.transaction}`:null}}}),S={class:"flex-center mb-5"},L={key:1,class:"etherscan-link main-black-text"},N=["href"];function F(e,t,i,l,d,$){const p=a("BaseLoading"),m=a("BaseInput"),f=a("BaseButton");return s(),u(V,{mode:"out-in"},{default:c(()=>[o("div",null,[e.isLoading?(s(),u(p,{key:0})):h("",!0),o("form",{class:y(e.transaction?"mb-2":"")},[o("div",S,[n(m,{modelValue:e.form.receiver,"onUpdate:modelValue":t[0]||(t[0]=r=>e.form.receiver=r),label:"Receiver",class:"mr-2",error:e.errors.getError("address"),onClearError:t[1]||(t[1]=r=>e.errors.clearError("address"))},null,8,["modelValue","error"]),n(m,{modelValue:e.form.amount,"onUpdate:modelValue":t[2]||(t[2]=r=>e.form.amount=r),label:"Amount",class:"ml-2",error:e.errors.getError("amount"),onClearError:t[3]||(t[3]=r=>e.errors.clearError("amount"))},null,8,["modelValue","error"])]),n(f,{buttonColor:"#E95420",onClick:e.submitForm},{default:c(()=>[g(" SEND ")]),_:1},8,["onClick"])],2),e.getEtherscanLink?(s(),k("div",L,[o("a",{href:e.getEtherscanLink,target:"_blank"}," Etherscan: "+B(e.transaction),9,N)])):h("",!0)])]),_:1})}const I=v(C,[["render",F],["__scopeId","data-v-e5a3c45e"]]);export{I as default};
